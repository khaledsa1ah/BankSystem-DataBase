CREATE TABLE _Bank
(
  Name VARCHAR(255) NOT NULL,
  Code VARCHAR(255) NOT NULL,
  Address VARCHAR(255) NOT NULL,
  PRIMARY KEY (Name)
);

CREATE TABLE Branch
(
  Address VARCHAR(255) NOT NULL,
  Bnumber VARCHAR(255) NOT NULL,
  Name VARCHAR(255) NOT NULL,
  PRIMARY KEY (Bnumber),
  FOREIGN KEY (Name) REFERENCES _Bank(Name)
);

CREATE TABLE User
(
  SNN VARCHAR(255) NOT NULL,
  Name VARCHAR(255) NOT NULL,
  Password VARCHAR(255) NOT NULL,
  Address VARCHAR(255) NOT NULL,
  Type VARCHAR(255) NOT NULL,
  Bnumber VARCHAR(255) NOT NULL,
  PRIMARY KEY (SNN),
  FOREIGN KEY (Bnumber) REFERENCES Branch(Bnumber)
);

CREATE TABLE Account
(
  AccNumber VARCHAR(255) NOT NULL,
  Balance FLOAT NOT NULL,
  Type VARCHAR(255) NOT NULL,
  SNN VARCHAR(255) NOT NULL,
  PRIMARY KEY (AccNumber),
  FOREIGN KEY (SNN) REFERENCES User(SNN)
);

CREATE TABLE LoanType
(
  Type VARCHAR(255) NOT NULL,
  Bnumber VARCHAR(255) NOT NULL,
  PRIMARY KEY (Type),
  FOREIGN KEY (Bnumber) REFERENCES Branch(Bnumber)
);

CREATE TABLE Loan
(
  Amount FLOAT NOT NULL,
  Lnumber VARCHAR(255) NOT NULL,
  EmpSNN VARCHAR(255),
  SNN VARCHAR(255) NOT NULL,
  Type VARCHAR(255) NOT NULL,
  Status VARCHAR(255) NOT NULL,
  PRIMARY KEY (Lnumber),
  FOREIGN KEY (SNN) REFERENCES User(SNN),
  FOREIGN KEY (Type) REFERENCES LoanType(Type),
  UNIQUE (SNN, Type)
);

CREATE TABLE User_Phone
(
  Phone VARCHAR(255) NOT NULL,
  SNN VARCHAR(255) NOT NULL,
  PRIMARY KEY (Phone, SNN),
  FOREIGN KEY (SNN) REFERENCES User(SNN)
);